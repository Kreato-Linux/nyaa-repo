#!/bin/sh
NAME="binutils"
VERSION="2.39"
SOURCES="https://ftp.gnu.org/gnu/binutils/binutils-$VERSION.tar.xz"
SHA256SUM="645c25f563b8adc0a81dbd6a41cffbf4d37083a382e02d5d3df4f65c09516d00  binutils-2.39.tar.xz"
DESCRIPTION="GNU Binutils"

build() {
    [ ! -d "binutils-$VERSION" ] && tar -xvf binutils-$VERSION.tar.xz
    cd binutils-$VERSION || exit 1
    ./configure                   \
        --prefix=/usr              \
        --build=$(./config.guess) \
        --host=x86_64-pc-linux-gnu \
        --disable-nls              \
        --enable-shared            \
        --disable-werror           \
        --enable-64-bit-bfd
    cd bfd || exit 1
    ./configure
    cd ..
    make
    make DESTDIR=$ROOT install -j1
    cd ld || exit 1
    make -j$(nproc)
    make DESTDIR=$ROOT install -j1
}
