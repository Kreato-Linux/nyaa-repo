#!/bin/sh
NAME="sudo"
RELEASE="2"
VERSION="1_9_12p1"
SOURCES="https://github.com/sudo-project/sudo/archive/refs/tags/SUDO_$VERSION.tar.gz"
DEPENDS="linux-pam shadow"
SHA256SUM="41ee958d0356dafce091244b1bff30dc75d87efcd78713ebea64ac48b4a50358  SUDO_1_9_12p1.tar.gz"
DESCRIPTION="Utility to execute a command as another user"

build() {
    ./configure --prefix=/usr
    make
}

package() {
    make install
    # From BLFS
    cat > $ROOT/etc/pam.d/sudo << "EOF"
# Begin /etc/pam.d/sudo

# include the default auth settings
auth      include     system-auth

# include the default account settings
account   include     system-account

# Set default environment variables for the service user
session   required    pam_env.so

# include system session defaults
session   include     system-session

# End /etc/pam.d/sudo
EOF
chmod 644 $ROOT/etc/pam.d/sudo
} 
