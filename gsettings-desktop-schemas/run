#!/bin/sh
NAME="gsettings-desktop-schemas"
RELEASE="2"
VERSION="44.0"
SOURCES="https://download.gnome.org/sources/gsettings-desktop-schemas/44/gsettings-desktop-schemas-$VERSION.tar.xz"
BUILD_DEPENDS="meson ninja"
DEPENDS="cantarell-fonts gobject-introspection"
SHA256SUM="eb2de45cad905994849e642a623adeb75d41b21b0626d40d2a07b8ea281fec0e  gsettings-desktop-schemas-44.0.tar.xz"
DESCRIPTION="Contains a collection of GSettings schemas for
settings shared by various components of a desktop"

build() {
    sed -i -r 's:"(/system):"/org/gnome\1:g' schemas/*.in
    meson setup \
    --prefix=/usr \
    --buildtype=release \
    build
    ninja -C build
}

package() {
    DESTDIR="$ROOT" ninja -C build install
}

postinstall() {
  glib-compile-schemas /usr/share/glib-2.0/schemas
}
