#!/bin/sh
NAME="jumpstart"
RELEASE="1"
VERSION="4.1.5"
SOURCES="https://github.com/kreatolinux/src/archive/refs/tags/v$VERSION.tar.gz"
SHA256SUM="7dfc0a1f0aa3cac814aad8f3f9cb591c8a40894a2e264a4b7fb52309a542f3e7  v4.1.6.tar.gz"
DESCRIPTION="Kreato Linux's Init system/Service manager"

build() {
        nimble install cligen fusion -y --nimbleDir=/tmp/kpkg/srcdir/deps
        nim c -d:release --threads:on -o="out/jumpstart" --NimblePath=/tmp/kpkg/srcdir/deps/pkgs --nimcache=/tmp/kpkg/srcdir/cache "src/jumpstart/jumpstart.nim"
        nim c -d:release --threads:on -o="out/jumpctl" --NimblePath=/tmp/kpkg/srcdir/deps/pkgs --nimcache=/tmp/kpkg/srcdir/cache "src/jumpstart/jumpctl.nim"
}

install() {
        mkdir -p "$ROOT/bin"
        cp out/jumpctl "$ROOT/bin/"
        cp out/jumpstart "$ROOT/bin"
}
